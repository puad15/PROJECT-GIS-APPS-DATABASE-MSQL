<?php
require_once("connection.php");
class JsonDisplayMarker {
	function getMarkers(){
	//buat koneksinya
	$connection = new Connection();
	$conn = $connection->getConnection();
	//buat responsenya
	$response = array();
	$code = "code";
	$message = "message";
	try{
		//tampilkan semua data dari mysql
		$queryMarker = "SELECT *.FROM studio";
		$getData = $conn->prepare(queryMarker);
		$getData->execute();
		$result = $getData->fetchAll(PDO::FETCH_ASSOC);
		foreact($result as $data){
			array_push($response,
				array(
					'nama' =>$data['nama'],
					'latitude' =>$data['latitude'],
					'longitude'=>$data['longitude'])
				);
				
		}
	}catch(PDOException $e){
		echo "failed displaying data".$e->getMessage();
	}
	//buatkan kondisi jika berhasil atau tidaknya
	if($queryMarker){
		echo json_encode(
			array("data"=>$response,$code=>1,$message=>"Success")
		);
	}else{
		echo json_encode(
			array("data"=>$response,$code=>0,$message=>"Failed displaying data")
		);
		}
	}
}
$location = new JsonDisplayMarker();
$location->getMarkers();